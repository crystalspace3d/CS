SubDir TOP plugins cscript cspython ;

if $(PYTHON.AVAILABLE) = "yes"
{
  #--------
  # cspython -- Crystal Space plugin
  #--------
  local swigruntime = swigpyruntime.h ;
  if $(CMD.SWIG)
  {
    SwigExternalRuntime $(swigruntime) :
      python :
      -c++ -shadow :
      $(SEARCH_SOURCE) [ ConcatDirs $(TOP) scripts python ] :
      cspython ;
    Depends cspythonclean : cspythonswigclean ;
  }
  else
  {
    SEARCH on $(swigruntime) = $(SEARCH_SOURCE) ;
    local frozenruntime = $(swigruntime:G=frozenruntime) ;
    SEARCH on $(frozenruntime) = [ ConcatDirs $(TOP) scripts python ] ;
    Copy $(swigruntime) : $(frozenruntime) ;
    Depends $(swigruntime) : $(frozenruntime) ;
  }
  
  Description cspython : "Python plugin" ;
  Plugin cspython : cspython.h cspython.cpp pytocs.h pytocs.cpp ;
  LinkWith cspython : crystalspace ;
  ExternalLibs cspython : PYTHON ;
  CFlags cspython : $(CSPYTHON.CFLAGS) ;
}
