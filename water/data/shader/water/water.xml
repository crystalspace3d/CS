<shader compiler="xmlshader" name="water">
	
	<shadervars>
		<shadervar name="position" type="vector4">-1.0, -1.0, -1.0, 0.0</shadervar>
		<shadervar name="color" type="vector4">0.9, 0.9, 0.9, 1.0</shadervar>
		<shadervar name="shine" type="float">1.0</shadervar>
		<shadervar name="murkiness" type="float">0.3</shadervar>
		
		<shadervar name="time" type="expression">
	      <sexp>(* "standard time" 1)</sexp>
	    </shadervar>
	    
	</shadervars>

	
  <technique priority="250">
    <pass>
      <mixmode><alpha/></mixmode>
      <buffer source="normal" destination="normal"/>
	  <buffer source="color" destination="color" />
	  <buffer source="texture coordinate 0" destination="texture coordinate 0" />
	
      <vp plugin="glcg" name="Water Vertices">
		<cgvp>
			<variablemap variable="time" destination="time" />
			<program file="/shader/water/water.cgvp"/>
		</cgvp>
      </vp>	

	  <texture destination="TexNormal" name="texture normal" />
      <fp plugin="glcg" name="Water pixels">
		<cgfp>
			<variablemap variable="position" destination="lightPos" />
			<variablemap variable="color" destination="lightCol" />
			<variablemap variable="shine" destination="shininess" />
			<variablemap variable="murkiness" destination="waterAlpha" />
			
			<program file="/shader/water/water.cgfp"/>
		</cgfp>
      </fp>
    </pass>
  </technique>
</shader>
